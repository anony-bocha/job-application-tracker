{% extends 'applications/base.html' %}
{% load crispy_forms_tags %}

{% block content %}
<div class="container mt-4">
    <h2>Freelancer Dashboard</h2>

    <div class="row text-center mb-4">
        <div class="col-md-3 mb-2">
            <div class="card bg-primary text-white shadow-sm rounded-3">
                <div class="card-body">
                    <h6>Total Applications</h6>
                    <h3>{{ total_apps }}</h3>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-2">
            <div class="card bg-success text-white shadow-sm rounded-3">
                <div class="card-body">
                    <h6>Total Interviews</h6>
                    <h3>{{ total_interviews }}</h3>
                </div>
            </div>
        </div>
    </div>

    <h4>Recent Applications</h4>
    <ul class="list-group mb-3">
        {% for app in recent_apps %}
            <li class="list-group-item">
                {{ app.company.name }} - {{ app.position }} ({{ app.get_status_display }})
                <span class="text-muted float-end">{{ app.applied_date }}</span>
            </li>
        {% empty %}
            <li class="list-group-item">No recent applications.</li>
        {% endfor %}
    </ul>

    <h4>Upcoming Interviews (Next 7 Days)</h4>
    <ul class="list-group">
        {% for interview in upcoming_interviews %}
            <li class="list-group-item">
                {{ interview.application.position }} - {{ interview.interview_type }}
                <span class="text-muted float-end">{{ interview.date }}</span>
            </li>
        {% empty %}
            <li class="list-group-item">No upcoming interviews.</li>
        {% endfor %}
    </ul>

    <div class="mt-3">
        <a href="{% url 'add_application' %}" class="btn btn-primary">Add New Application</a>
    </div>
</div>
{% endblock %}
